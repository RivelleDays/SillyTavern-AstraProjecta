/* =============================================================
    Mobile chat header layout
   ============================================================= */

@media screen and (max-width: 600px) {
    #mobileChatHeader {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 12px;
    }

    body.astra-mobile-layout #mobileFormShellWrapper {
        display: flex;
        flex-direction: column;
        position: relative;
        isolation: isolate;
    }

    body.astra-mobile-layout #mobileFormShellWrapper::before {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        width: 120%;
        margin-left: -5px;
        background: linear-gradient(
            180deg,
            transparent 0%,
            color-mix(in srgb, var(--surface-base) 100%, transparent) 50%,
            color-mix(in srgb, var(--surface-base) 90%, transparent) 90%,
            color-mix(in srgb, var(--surface-base) 100%, transparent) 100%
        );
        z-index: -1;
    }

    body.astra-mobile-layout #mobileChatHeader .mobile-chat-header__identity {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        flex: 1 1 auto;
        min-width: 0;
        padding: 0;
        margin: 0;
        border: none;
        background: none;
        color: inherit;
        font: inherit;
        text-align: left;
        cursor: pointer;
    }

    body.astra-mobile-layout #mobileChatHeader .mobile-chat-header__avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        overflow: hidden;
        flex-shrink: 0;
        background: var(--color-base-t10);
    }

    body.astra-mobile-layout #mobileChatHeader .mobile-chat-header__avatar img {
        width: 100%;
        height: 100%;
        display: block;
        object-fit: cover;
    }

    body.astra-mobile-layout
        #mobileChatHeader
        .mobile-chat-header__identity-text {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        min-width: 0;
    }

    body.astra-mobile-layout
        #mobileChatHeader
        .mobile-chat-header__identity-name {
        font-size: var(--text-base);
        font-weight: var(--font-weight-medium);
        color: var(--color-base);
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 180px;
        text-shadow: var(--text-shadow-base);
    }

    body.astra-mobile-layout
        #mobileChatHeader
        .mobile-chat-header__group-count {
        display: none;
        min-width: 22px;
        height: 22px;
        padding: 0 8px;
        border-radius: var(--radius-full);
        font-size: var(--text-xs);
        line-height: var(--text-xs--line-height);
        font-weight: var(--font-weight-semibold);
        align-items: center;
        justify-content: center;
        background: var(--color-base-t10);
        color: var(--color-base);
    }

    body.astra-mobile-layout
        #mobileChatHeader
        .mobile-chat-header__group-count.is-visible {
        display: inline-flex;
    }

    body.astra-mobile-layout
        #mobileChatHeader
        .mobile-chat-header__identity-chevron {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: var(--color-base);
        opacity: 0.7;
        flex-shrink: 0;
    }

    body.astra-mobile-layout
        #mobileChatHeader
        .mobile-chat-header__identity-chevron
        svg {
        width: var(--text-base);
        height: var(--text-base);
    }

    body.astra-mobile-layout #mobileChatHeader .mobile-chat-header__actions {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        flex-shrink: 0;
    }

    body.astra-mobile-layout #mobileChatHeader .mobile-chat-header__action {
        position: relative;
        width: 36px;
        height: 36px;
        background: var(--surface-muted-t20);
        border-color: var(--color-base-t10);
        border-radius: 8px;
        opacity: 0.9;
    }

    body.astra-mobile-layout #mobileChatHeader .mobile-chat-header__action svg {
        width: 20px;
        height: 20px;
        stroke-width: 1.75;
    }

    body.astra-mobile-layout
        #mobileChatHeader
        .mobile-chat-header__action
        .lore-badge {
        position: absolute;
        display: flex;
        top: -6px;
        right: -6px;
        font-size: 0.6rem;
        border-radius: 20px;
        background: var(--accent-foreground);
        color: var(--accent);
        padding: 0 4px;
        min-width: 16px;
        height: 16px;
        align-items: center;
        justify-content: center;
    }

    body.astra-mobile-layout #characterSection {
        display: none !important;
    }

    body.astra-mobile-layout #primaryTitleSlot {
        display: none !important;
    }

    body.astra-mobile-layout #primaryBarRight #loreButton,
    body.astra-mobile-layout #primaryBarRight #chatInfoButton {
        display: none !important;
    }

    #mobileChatFileName {
        display: none;
        align-items: center;
        gap: 6px;
        flex: 1 1 auto;
        min-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        color: var(--color-base);
    }

    #mobileChatFileName svg {
        width: 18px;
        height: 18px;
    }

    #mobileChatFileName .mobile-chat-file-name__label {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        font-size: var(--text-sm);
        opacity: 0.8;
        font-weight: var(--font-weight-medium);
    }

    body.astra-mobile-layout #primaryBarLeft #mobileMainCloseButton {
        order: 0;
    }

    body.astra-mobile-layout #primaryBarLeft #mobileChatFileName {
        display: inline-flex;
        order: 1;
    }

    body.astra-mobile-layout.astra-mobile-main-visible
        #mobileMainCloseButton
        + #mobileChatFileName {
        margin-left: 6px;
    }

    #primaryBarLeft {
        gap: 4px;
    }
    #primaryBarLeft > *:not(:last-child) {
        margin-right: 0;
    }

    .astra-primary-divider {
        display: none !important;
    }
}
